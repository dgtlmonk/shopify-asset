var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function u(t,n){t.appendChild(n)}function s(t,n,e){t.insertBefore(n,e||null)}function c(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function l(){return a(" ")}function d(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}let g;function p(t){g=t}function h(){if(!g)throw new Error("Function called outside component initialization");return g}function m(){const t=h();return(n,e)=>{const r=t.$$.callbacks[n];if(r){const o=function(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}(n,e);r.slice().forEach((n=>{n.call(t,o)}))}}}const $=[],y=[],_=[],b=[],v=Promise.resolve();let w=!1;function x(t){_.push(t)}let T=!1;const k=new Set;function B(){if(!T){T=!0;do{for(let t=0;t<$.length;t+=1){const n=$[t];p(n),E(n.$$)}for(p(null),$.length=0;y.length;)y.pop()();for(let t=0;t<_.length;t+=1){const n=_[t];k.has(n)||(k.add(n),n())}_.length=0}while($.length);for(;b.length;)b.pop()();w=!1,T=!1,k.clear()}}function E(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(x)}}const A=new Set;function S(t,n){t&&t.i&&(A.delete(t),t.i(n))}function I(t,n,e,r){if(t&&t.o){if(A.has(t))return;A.add(t),undefined.c.push((()=>{A.delete(t),r&&(e&&t.d(1),r())})),t.o(n)}}function C(t){t&&t.c()}function L(t,e,i,u){const{fragment:s,on_mount:c,on_destroy:f,after_update:a}=t.$$;s&&s.m(e,i),u||x((()=>{const e=c.map(n).filter(o);f?f.push(...e):r(e),t.$$.on_mount=[]})),a.forEach(x)}function O(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function j(t,n){-1===t.$$.dirty[0]&&($.push(t),w||(w=!0,v.then(B)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function N(n,o,i,u,s,f,a=[-1]){const l=g;p(n);const d=n.$$={fragment:null,ctx:null,props:f,update:t,not_equal:s,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:o.context||[]),callbacks:e(),dirty:a,skip_bound:!1};let h=!1;if(d.ctx=i?i(n,o.props||{},((t,e,...r)=>{const o=r.length?r[0]:e;return d.ctx&&s(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),h&&j(n,t)),e})):[],d.update(),h=!0,r(d.before_update),d.fragment=!!u&&u(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(c)}else d.fragment&&d.fragment.c();o.intro&&S(n.$$.fragment),L(n,o.target,o.anchor,o.customElement),B()}p(l)}class M{$destroy(){O(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function U(t){var n={exports:{}};return t(n,n.exports),n.exports}var W=U((function(t){!function(){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(t,n){return t<<n|t>>>32-n},rotr:function(t,n){return t<<32-n|t>>>n},endian:function(t){if(t.constructor==Number)return 16711935&e.rotl(t,8)|4278255360&e.rotl(t,24);for(var n=0;n<t.length;n++)t[n]=e.endian(t[n]);return t},randomBytes:function(t){for(var n=[];t>0;t--)n.push(Math.floor(256*Math.random()));return n},bytesToWords:function(t){for(var n=[],e=0,r=0;e<t.length;e++,r+=8)n[r>>>5]|=t[e]<<24-r%32;return n},wordsToBytes:function(t){for(var n=[],e=0;e<32*t.length;e+=8)n.push(t[e>>>5]>>>24-e%32&255);return n},bytesToHex:function(t){for(var n=[],e=0;e<t.length;e++)n.push((t[e]>>>4).toString(16)),n.push((15&t[e]).toString(16));return n.join("")},hexToBytes:function(t){for(var n=[],e=0;e<t.length;e+=2)n.push(parseInt(t.substr(e,2),16));return n},bytesToBase64:function(t){for(var e=[],r=0;r<t.length;r+=3)for(var o=t[r]<<16|t[r+1]<<8|t[r+2],i=0;i<4;i++)8*r+6*i<=8*t.length?e.push(n.charAt(o>>>6*(3-i)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,o=0;r<t.length;o=++r%4)0!=o&&e.push((n.indexOf(t.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|n.indexOf(t.charAt(r))>>>6-2*o);return e}};t.exports=e}()})),R={utf8:{stringToBytes:function(t){return R.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(R.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var n=[],e=0;e<t.length;e++)n.push(255&t.charCodeAt(e));return n},bytesToString:function(t){for(var n=[],e=0;e<t.length;e++)n.push(String.fromCharCode(t[e]));return n.join("")}}},z=R,F=function(t){return null!=t&&(H(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&H(t.slice(0,0))}(t)||!!t._isBuffer)};function H(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var q=U((function(t){!function(){var n=W,e=z.utf8,r=F,o=z.bin,i=function(t,u){t.constructor==String?t=u&&"binary"===u.encoding?o.stringToBytes(t):e.stringToBytes(t):r(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var s=n.bytesToWords(t),c=8*t.length,f=1732584193,a=-271733879,l=-1732584194,d=271733878,g=0;g<s.length;g++)s[g]=16711935&(s[g]<<8|s[g]>>>24)|4278255360&(s[g]<<24|s[g]>>>8);s[c>>>5]|=128<<c%32,s[14+(c+64>>>9<<4)]=c;var p=i._ff,h=i._gg,m=i._hh,$=i._ii;for(g=0;g<s.length;g+=16){var y=f,_=a,b=l,v=d;f=p(f,a,l,d,s[g+0],7,-680876936),d=p(d,f,a,l,s[g+1],12,-389564586),l=p(l,d,f,a,s[g+2],17,606105819),a=p(a,l,d,f,s[g+3],22,-1044525330),f=p(f,a,l,d,s[g+4],7,-176418897),d=p(d,f,a,l,s[g+5],12,1200080426),l=p(l,d,f,a,s[g+6],17,-1473231341),a=p(a,l,d,f,s[g+7],22,-45705983),f=p(f,a,l,d,s[g+8],7,1770035416),d=p(d,f,a,l,s[g+9],12,-1958414417),l=p(l,d,f,a,s[g+10],17,-42063),a=p(a,l,d,f,s[g+11],22,-1990404162),f=p(f,a,l,d,s[g+12],7,1804603682),d=p(d,f,a,l,s[g+13],12,-40341101),l=p(l,d,f,a,s[g+14],17,-1502002290),f=h(f,a=p(a,l,d,f,s[g+15],22,1236535329),l,d,s[g+1],5,-165796510),d=h(d,f,a,l,s[g+6],9,-1069501632),l=h(l,d,f,a,s[g+11],14,643717713),a=h(a,l,d,f,s[g+0],20,-373897302),f=h(f,a,l,d,s[g+5],5,-701558691),d=h(d,f,a,l,s[g+10],9,38016083),l=h(l,d,f,a,s[g+15],14,-660478335),a=h(a,l,d,f,s[g+4],20,-405537848),f=h(f,a,l,d,s[g+9],5,568446438),d=h(d,f,a,l,s[g+14],9,-1019803690),l=h(l,d,f,a,s[g+3],14,-187363961),a=h(a,l,d,f,s[g+8],20,1163531501),f=h(f,a,l,d,s[g+13],5,-1444681467),d=h(d,f,a,l,s[g+2],9,-51403784),l=h(l,d,f,a,s[g+7],14,1735328473),f=m(f,a=h(a,l,d,f,s[g+12],20,-1926607734),l,d,s[g+5],4,-378558),d=m(d,f,a,l,s[g+8],11,-2022574463),l=m(l,d,f,a,s[g+11],16,1839030562),a=m(a,l,d,f,s[g+14],23,-35309556),f=m(f,a,l,d,s[g+1],4,-1530992060),d=m(d,f,a,l,s[g+4],11,1272893353),l=m(l,d,f,a,s[g+7],16,-155497632),a=m(a,l,d,f,s[g+10],23,-1094730640),f=m(f,a,l,d,s[g+13],4,681279174),d=m(d,f,a,l,s[g+0],11,-358537222),l=m(l,d,f,a,s[g+3],16,-722521979),a=m(a,l,d,f,s[g+6],23,76029189),f=m(f,a,l,d,s[g+9],4,-640364487),d=m(d,f,a,l,s[g+12],11,-421815835),l=m(l,d,f,a,s[g+15],16,530742520),f=$(f,a=m(a,l,d,f,s[g+2],23,-995338651),l,d,s[g+0],6,-198630844),d=$(d,f,a,l,s[g+7],10,1126891415),l=$(l,d,f,a,s[g+14],15,-1416354905),a=$(a,l,d,f,s[g+5],21,-57434055),f=$(f,a,l,d,s[g+12],6,1700485571),d=$(d,f,a,l,s[g+3],10,-1894986606),l=$(l,d,f,a,s[g+10],15,-1051523),a=$(a,l,d,f,s[g+1],21,-2054922799),f=$(f,a,l,d,s[g+8],6,1873313359),d=$(d,f,a,l,s[g+15],10,-30611744),l=$(l,d,f,a,s[g+6],15,-1560198380),a=$(a,l,d,f,s[g+13],21,1309151649),f=$(f,a,l,d,s[g+4],6,-145523070),d=$(d,f,a,l,s[g+11],10,-1120210379),l=$(l,d,f,a,s[g+2],15,718787259),a=$(a,l,d,f,s[g+9],21,-343485551),f=f+y>>>0,a=a+_>>>0,l=l+b>>>0,d=d+v>>>0}return n.endian([f,a,l,d])};i._ff=function(t,n,e,r,o,i,u){var s=t+(n&e|~n&r)+(o>>>0)+u;return(s<<i|s>>>32-i)+n},i._gg=function(t,n,e,r,o,i,u){var s=t+(n&r|e&~r)+(o>>>0)+u;return(s<<i|s>>>32-i)+n},i._hh=function(t,n,e,r,o,i,u){var s=t+(n^e^r)+(o>>>0)+u;return(s<<i|s>>>32-i)+n},i._ii=function(t,n,e,r,o,i,u){var s=t+(e^(n|~r))+(o>>>0)+u;return(s<<i|s>>>32-i)+n},i._blocksize=16,i._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var r=n.wordsToBytes(i(t,e));return e&&e.asBytes?r:e&&e.asString?o.bytesToString(r):n.bytesToHex(r)}}()}));class D extends M{constructor(t){super(),N(this,t,null,null,i,{})}}function G(n){let e,r,o,i;return{c(){e=f("button"),r=a(n[2]),d(e,"style",n[1]),d(e,"class","shadow-lg border bg-white tracking-normal rounded-lg p-2 m-2 mt-0 outline-none focus:outline-none")},m(t,c){var f,a,l,d;s(t,e,c),u(e,r),o||(f=e,a="click",l=n[4],f.addEventListener(a,l,d),i=()=>f.removeEventListener(a,l,d),o=!0)},p(t,[n]){4&n&&function(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}(r,t[2]),2&n&&d(e,"style",t[1])},i:t,o:t,d(t){t&&c(e),o=!1,i()}}}function P(t,n,e){let r,o;const i=m();let u=!1;return t.$$.update=()=>{1&t.$$.dirty&&e(1,r=u?"width: 50px; height: 50px; border-radius: 50%;":""),1&t.$$.dirty&&e(2,o=u?"x":"Rewards")},[u,r,o,i,()=>{i("toggle"),e(0,u=!u)}]}class Z extends M{constructor(t){super(),N(this,t,P,G,i,{})}}function J(n){let e;return{c(){e=a("Login to earn rewards.")},m(t,n){s(t,e,n)},p:t,d(t){t&&c(e)}}}function K(n){let e,r=function({offers:t,levels:n}){return`\n      Offers:\n      ${t.map((t=>`${t.code} \n`))}\n      ${n.map((t=>`\n          \nLevel : ${t.level}  \n\n            Stamps: ${t.stamps.filter((t=>1===t)).length} / ${t.stamps.length} \n\n\n        `))}\n `}(n[3])+"";return{c(){e=a(r)},m(t,n){s(t,e,n)},p:t,d(t){t&&c(e)}}}function Q(t){let n,e,r,o,i,a,g;function p(t,n){return t[1]?K:J}n=new D({});let h=p(t),m=h(t);return a=new Z({props:{isToggled:t[0]}}),a.$on("toggle",t[4]),{c(){C(n.$$.fragment),e=l(),r=f("div"),o=f("div"),m.c(),i=l(),C(a.$$.fragment),d(o,"class","shadow-lg border bg-white tracking-normal rounded-lg p-2 m-2"),d(o,"style",t[2]),d(r,"class","flex flex-col justify-items-end items-end")},m(t,c){L(n,t,c),s(t,e,c),s(t,r,c),u(r,o),m.m(o,null),u(r,i),L(a,r,null),g=!0},p(t,[n]){h===(h=p(t))&&m?m.p(t,n):(m.d(1),m=h(t),m&&(m.c(),m.m(o,null))),(!g||4&n)&&d(o,"style",t[2]);const e={};1&n&&(e.isToggled=t[0]),a.$set(e)},i(t){g||(S(n.$$.fragment,t),S(a.$$.fragment,t),g=!0)},o(t){I(n.$$.fragment,t),I(a.$$.fragment,t),g=!1},d(t){O(n,t),t&&c(e),t&&c(r),m.d(),O(a)}}}function V(t,n,e){let r,o=!1,i=!1;var u;return u=async()=>{if(console.log("[ON MOUNT] Rewards Widget "),window.__perkd__init__&&window.__perkd__init__.isLoggedIn)return e(1,i=window.__perkd__init__.isLoggedIn),console.info("shop id ",q(window.__perkd__init__.shop)),void console.info("[WIDGET] User is logged in ",window.__perkd__init__.isLoggedIn)},h().$$.on_mount.push(u),t.$$.update=()=>{1&t.$$.dirty&&e(2,r=o?"display: block;":"display: none;")},[o,i,r,{offers:[],levels:[]},function(){e(0,o=!o)}]}const X=document.getElementById("perkd-rewards-widget-launcher-frame"),Y=X?X.contentWindow.document.getElementById("perkd-rewards-widget-launcher"):document.getElementById("perkd-rewards-widget-launcher");return new class extends M{constructor(t){super(),N(this,t,V,Q,i,{})}}({target:Y})}();
//# sourceMappingURL=perkd-rewards-widget.min.js.map
