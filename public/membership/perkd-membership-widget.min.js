var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function s(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,n,s,r){return t[1]&&r?e(s.ctx.slice(),t[1](r(n))):s.ctx}function c(t,e,n,s,r,o,i){const c=function(t,e,n,s){if(t[2]&&s){const r=t[2](s(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let s=0;s<n;s+=1)t[s]=e.dirty[s]|r[s];return t}return e.dirty|r}return e.dirty}(e,s,r,o);if(c){const r=a(e,n,s,i);t.p(r,c)}}function h(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function u(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function f(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function m(t){return document.createTextNode(t)}function g(){return m(" ")}function y(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function b(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){for(const n in e)b(t,n,e[n])}function w(t){return Array.from(t.childNodes)}function k(t,e,n,s){for(let s=0;s<t.length;s+=1){const r=t[s];if(r.nodeName===e){let e=0;const o=[];for(;e<r.attributes.length;){const t=r.attributes[e++];n[t.name]||o.push(t.name)}for(let t=0;t<o.length;t++)r.removeAttribute(o[t]);return t.splice(s,1)[0]}}return s?f(e):d(e)}function C(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function _(t,e,n,s){t.style.setProperty(e,n,s?"important":"")}let x;function E(t){x=t}function $(){if(!x)throw new Error("Function called outside component initialization");return x}function T(){const t=$();return(e,n)=>{const s=t.$$.callbacks[e];if(s){const r=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);s.slice().forEach((e=>{e.call(t,r)}))}}}const S=[],A=[],B=[],N=[],O=Promise.resolve();let P=!1;function R(t){B.push(t)}let j=!1;const F=new Set;function L(){if(!j){j=!0;do{for(let t=0;t<S.length;t+=1){const e=S[t];E(e),M(e.$$)}for(E(null),S.length=0;A.length;)A.pop()();for(let t=0;t<B.length;t+=1){const e=B[t];F.has(e)||(F.add(e),e())}B.length=0}while(S.length);for(;N.length;)N.pop()();P=!1,j=!1,F.clear()}}function M(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(R)}}const I=new Set;let q;function D(t,e){t&&t.i&&(I.delete(t),t.i(e))}function V(t,e,n,s){if(t&&t.o){if(I.has(t))return;I.add(t),q.c.push((()=>{I.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}function H(t,e){const n={},s={},r={$$scope:1};let o=t.length;for(;o--;){const i=t[o],a=e[o];if(a){for(const t in i)t in a||(s[t]=1);for(const t in a)r[t]||(n[t]=a[t],r[t]=1);t[o]=a}else for(const t in i)r[t]=1}for(const t in s)t in n||(n[t]=void 0);return n}function z(t){t&&t.c()}function U(t,e,s,i){const{fragment:a,on_mount:c,on_destroy:h,after_update:u}=t.$$;a&&a.m(e,s),i||R((()=>{const e=c.map(n).filter(o);h?h.push(...e):r(e),t.$$.on_mount=[]})),u.forEach(R)}function K(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Y(t,e){-1===t.$$.dirty[0]&&(S.push(t),P||(P=!0,O.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(e,n,o,i,a,c,h=[-1]){const u=x;E(e);const l=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:n.context||[]),callbacks:s(),dirty:h,skip_bound:!1};let d=!1;if(l.ctx=o?o(e,n.props||{},((t,n,...s)=>{const r=s.length?s[0]:n;return l.ctx&&a(l.ctx[t],l.ctx[t]=r)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](r),d&&Y(e,t)),n})):[],l.update(),d=!0,r(l.before_update),l.fragment=!!i&&i(l.ctx),n.target){if(n.hydrate){const t=w(n.target);l.fragment&&l.fragment.l(t),t.forEach(p)}else l.fragment&&l.fragment.c();n.intro&&D(e.$$.fragment),U(e,n.target,n.anchor,n.customElement),L()}E(u)}class W{$destroy(){K(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function J(e){let n,s,r;return{c(){n=d("div"),s=m("1"),b(n,"class",r="badge bg-red-500 text-white flex items-center justify-center shadow-md "+(e[0]?"visible":"hidden")+" svelte-f1200t")},m(t,e){l(t,n,e),u(n,s)},p(t,[e]){1&e&&r!==(r="badge bg-red-500 text-white flex items-center justify-center shadow-md "+(t[0]?"visible":"hidden")+" svelte-f1200t")&&b(n,"class",r)},i:t,o:t,d(t){t&&p(n)}}}function G(t,e,n){let{show:s=!1}=e;return t.$$set=t=>{"show"in t&&n(0,s=t.show)},[s]}class Z extends W{constructor(t){super(),X(this,t,G,J,i,{show:0})}}function Q(n){let s,r,o=[{width:"20"},{height:"20"},{viewBox:"0 0 20 20"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},n[0]],i={};for(let t=0;t<o.length;t+=1)i=e(i,o[t]);return{c(){s=f("svg"),r=f("path"),this.h()},l(t){s=k(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0},1);var e=w(s);r=k(e,"path",{d:!0,fill:!0},1),w(r).forEach(p),e.forEach(p),this.h()},h(){b(r,"d","M11.7673 9.99978L19.6335 2.13355C19.8679 1.89917 19.9996 1.58128 19.9996 1.24981C19.9996 0.918338 19.8679 0.600445 19.6335 0.36606C19.3991 0.131676 19.0812 0 18.7498 0C18.4183 0 18.1004 0.131676 17.866 0.36606L9.99978 8.23229L2.13355 0.36606C2.0175 0.250005 1.87972 0.157945 1.72809 0.0951362C1.57645 0.0323275 1.41393 0 1.24981 0C1.08568 0 0.923161 0.0323275 0.771527 0.0951362C0.619893 0.157945 0.482116 0.250005 0.36606 0.36606C0.131676 0.600445 0 0.918338 0 1.24981C0 1.58128 0.131676 1.89917 0.36606 2.13355L8.23229 9.99978L0.36606 17.866C0.131676 18.1004 0 18.4183 0 18.7498C0 19.0812 0.131676 19.3991 0.36606 19.6335C0.600445 19.8679 0.918338 19.9996 1.24981 19.9996C1.58128 19.9996 1.89917 19.8679 2.13355 19.6335L9.99978 11.7673L17.866 19.6335C17.9818 19.75 18.1195 19.8424 18.2712 19.9055C18.4229 19.9686 18.5855 20.001 18.7498 20.001C18.914 20.001 19.0767 19.9686 19.2283 19.9055C19.38 19.8424 19.5177 19.75 19.6335 19.6335C19.7497 19.5175 19.8419 19.3798 19.9047 19.2281C19.9676 19.0765 20 18.9139 20 18.7498C20 18.5856 19.9676 18.423 19.9047 18.2714C19.8419 18.1197 19.7497 17.982 19.6335 17.866L11.7673 9.99978Z"),b(r,"fill","#000000"),v(s,i)},m(t,e){l(t,s,e),u(s,r)},p(t,[e]){v(s,i=H(o,[{width:"20"},{height:"20"},{viewBox:"0 0 20 20"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},1&e&&t[0]]))},i:t,o:t,d(t){t&&p(s)}}}function tt(t,n,s){return t.$$set=t=>{s(0,n=e(e({},n),h(t)))},[n=h(n)]}class et extends W{constructor(t){super(),X(this,t,tt,Q,i,{})}}function nt(e){let n,s,r,o;return{c(){n=d("div"),s=d("div"),r=d("p"),o=m(e[0]),b(r,"class","svelte-nlzyr"),b(s,"class","leading-5 pointer-events-none select-none"),b(n,"class","flex flex-col relative")},m(t,e){l(t,n,e),u(n,s),u(s,r),u(r,o)},p(t,[e]){1&e&&C(o,t[0])},i:t,o:t,d(t){t&&p(n)}}}function st(t,e,n){let{title:s=""}=e;return t.$$set=t=>{"title"in t&&n(0,s=t.title)},[s]}class rt extends W{constructor(t){super(),X(this,t,st,nt,i,{title:0})}}function ot(t){let e,n,s,r,o,i,h,f,m,v;n=new rt({props:{title:t[0]}}),i=new et({props:{width:"12",class:"cursor-pointer opacity-20 hover:opacity-90"}});const w=t[4].default,k=function(t,e,n,s){if(t){const r=a(t,e,n,s);return t[0](r)}}(w,t,t[3],null);return{c(){e=d("div"),z(n.$$.fragment),s=g(),r=d("div"),o=d("button"),z(i.$$.fragment),h=g(),k&&k.c(),b(o,"class","px-2 py-1 focus:outline-none rounded-sm hover:bg-gray-100 items-center justify-center flex"),b(r,"class","absolute"),_(r,"top","8px"),_(r,"right","8px"),b(e,"class","perkd-membership-widget__notification justify-items-start border-gray-200 px-6 py-5 mr-4 shadow-lg h-full rounded-xl bg-gray-50 w-2/3 z-20 svelte-4ba36w")},m(a,c){l(a,e,c),U(n,e,null),u(e,s),u(e,r),u(r,o),U(i,o,null),u(e,h),k&&k.m(e,null),f=!0,m||(v=y(o,"click",t[5]),m=!0)},p(t,[e]){const s={};1&e&&(s.title=t[0]),n.$set(s),k&&k.p&&(!f||8&e)&&c(k,w,t,t[3],e,null,null)},i(t){f||(D(n.$$.fragment,t),D(i.$$.fragment,t),D(k,t),f=!0)},o(t){V(n.$$.fragment,t),V(i.$$.fragment,t),V(k,t),f=!1},d(t){t&&p(e),K(n),K(i),k&&k.d(t),m=!1,v()}}}function it(t,e,n){let s,{$$slots:r={},$$scope:o}=e,{type:i=null}=e;const a=T();return t.$$set=t=>{"type"in t&&n(2,i=t.type),"$$scope"in t&&n(3,o=t.$$scope)},t.$$.update=()=>{4&t.$$.dirty&&n(0,s="progress"===i?"Your progress":"Join our Membership Program!")},[s,a,i,o,r,()=>a("dismiss")]}class at extends W{constructor(t){super(),X(this,t,it,ot,i,{type:2})}}function ct(e){let n,s,r,o,i;return{c(){n=d("div"),n.innerHTML='<p class="svelte-12e6c8u">Create an account,  start shopping, and\n\t\tqualify for Membership Program!</p> \n\n\t\t<p class="pt-2 svelte-12e6c8u">Exclusive Members-only products and\n\tdiscounts awaits!</p>',s=g(),r=d("hr"),o=g(),i=d("div"),i.innerHTML='<a href="/account/login" class="outline-none focus:outline-none rounded-md shadow-md py-2 px-6\n\t\t\t\tbg-orange-dark mb-2 font-medium" style="color: white; font-size: .9rem;">Create an account</a> \n\t\t<span class="text-gray-800" style="font-size: .8rem;">Already have an account? <a href="/account/register" class="text-shopify-interactive font-semibold">Sign in</a></span>',b(n,"class","notification__body my-3 text-sm text-shopify-subdued svelte-12e6c8u"),b(i,"class","mt-1 flex flex-col justify-center items-center pt-2")},m(t,e){l(t,n,e),l(t,s,e),l(t,r,e),l(t,o,e),l(t,i,e)},p:t,i:t,o:t,d(t){t&&p(n),t&&p(s),t&&p(r),t&&p(o),t&&p(i)}}}class ht extends W{constructor(t){super(),X(this,t,null,ct,i,{})}}function ut(e){let n,s,r,o,i,a,c,h,f;return{c(){n=d("div"),s=d("p"),r=m("Spend $"),o=m(e[0]),i=m(" to qualify for "),a=m(e[1]),c=m("!"),h=g(),f=d("p"),f.textContent="Exclusive Members-only products and\n\tdiscounts awaits!",b(s,"class","svelte-12e6c8u"),b(f,"class","pt-2 svelte-12e6c8u"),b(n,"class","notification__body my-3 text-sm text-shopify-subdued  svelte-12e6c8u")},m(t,e){l(t,n,e),u(n,s),u(s,r),u(s,o),u(s,i),u(s,a),u(s,c),u(n,h),u(n,f)},p(t,[e]){1&e&&C(o,t[0]),2&e&&C(a,t[1])},i:t,o:t,d(t){t&&p(n)}}}function lt(t,e,n){let{amountToNextTier:s=0}=e,{nextTier:r="X Tier"}=e;return t.$$set=t=>{"amountToNextTier"in t&&n(0,s=t.amountToNextTier),"nextTier"in t&&n(1,r=t.nextTier)},[s,r]}class pt extends W{constructor(t){super(),X(this,t,lt,ut,i,{amountToNextTier:0,nextTier:1})}}function dt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ft(t){var e={exports:{}};return t(e,e.exports),e.exports}var mt=ft((function(t){!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,s=0;n<t.length;n++,s+=8)e[s>>>5]|=t[n]<<24-s%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],s=0;s<t.length;s+=3)for(var r=t[s]<<16|t[s+1]<<8|t[s+2],o=0;o<4;o++)8*s+6*o<=8*t.length?n.push(e.charAt(r>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],s=0,r=0;s<t.length;r=++s%4)0!=r&&n.push((e.indexOf(t.charAt(s-1))&Math.pow(2,-2*r+8)-1)<<2*r|e.indexOf(t.charAt(s))>>>6-2*r);return n}};t.exports=n}()})),gt={utf8:{stringToBytes:function(t){return gt.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(gt.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}},yt=gt,bt=function(t){return null!=t&&(vt(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&vt(t.slice(0,0))}(t)||!!t._isBuffer)};function vt(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var wt=ft((function(t){!function(){var e=mt,n=yt.utf8,s=bt,r=yt.bin,o=function(t,i){t.constructor==String?t=i&&"binary"===i.encoding?r.stringToBytes(t):n.stringToBytes(t):s(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var a=e.bytesToWords(t),c=8*t.length,h=1732584193,u=-271733879,l=-1732584194,p=271733878,d=0;d<a.length;d++)a[d]=16711935&(a[d]<<8|a[d]>>>24)|4278255360&(a[d]<<24|a[d]>>>8);a[c>>>5]|=128<<c%32,a[14+(c+64>>>9<<4)]=c;var f=o._ff,m=o._gg,g=o._hh,y=o._ii;for(d=0;d<a.length;d+=16){var b=h,v=u,w=l,k=p;h=f(h,u,l,p,a[d+0],7,-680876936),p=f(p,h,u,l,a[d+1],12,-389564586),l=f(l,p,h,u,a[d+2],17,606105819),u=f(u,l,p,h,a[d+3],22,-1044525330),h=f(h,u,l,p,a[d+4],7,-176418897),p=f(p,h,u,l,a[d+5],12,1200080426),l=f(l,p,h,u,a[d+6],17,-1473231341),u=f(u,l,p,h,a[d+7],22,-45705983),h=f(h,u,l,p,a[d+8],7,1770035416),p=f(p,h,u,l,a[d+9],12,-1958414417),l=f(l,p,h,u,a[d+10],17,-42063),u=f(u,l,p,h,a[d+11],22,-1990404162),h=f(h,u,l,p,a[d+12],7,1804603682),p=f(p,h,u,l,a[d+13],12,-40341101),l=f(l,p,h,u,a[d+14],17,-1502002290),h=m(h,u=f(u,l,p,h,a[d+15],22,1236535329),l,p,a[d+1],5,-165796510),p=m(p,h,u,l,a[d+6],9,-1069501632),l=m(l,p,h,u,a[d+11],14,643717713),u=m(u,l,p,h,a[d+0],20,-373897302),h=m(h,u,l,p,a[d+5],5,-701558691),p=m(p,h,u,l,a[d+10],9,38016083),l=m(l,p,h,u,a[d+15],14,-660478335),u=m(u,l,p,h,a[d+4],20,-405537848),h=m(h,u,l,p,a[d+9],5,568446438),p=m(p,h,u,l,a[d+14],9,-1019803690),l=m(l,p,h,u,a[d+3],14,-187363961),u=m(u,l,p,h,a[d+8],20,1163531501),h=m(h,u,l,p,a[d+13],5,-1444681467),p=m(p,h,u,l,a[d+2],9,-51403784),l=m(l,p,h,u,a[d+7],14,1735328473),h=g(h,u=m(u,l,p,h,a[d+12],20,-1926607734),l,p,a[d+5],4,-378558),p=g(p,h,u,l,a[d+8],11,-2022574463),l=g(l,p,h,u,a[d+11],16,1839030562),u=g(u,l,p,h,a[d+14],23,-35309556),h=g(h,u,l,p,a[d+1],4,-1530992060),p=g(p,h,u,l,a[d+4],11,1272893353),l=g(l,p,h,u,a[d+7],16,-155497632),u=g(u,l,p,h,a[d+10],23,-1094730640),h=g(h,u,l,p,a[d+13],4,681279174),p=g(p,h,u,l,a[d+0],11,-358537222),l=g(l,p,h,u,a[d+3],16,-722521979),u=g(u,l,p,h,a[d+6],23,76029189),h=g(h,u,l,p,a[d+9],4,-640364487),p=g(p,h,u,l,a[d+12],11,-421815835),l=g(l,p,h,u,a[d+15],16,530742520),h=y(h,u=g(u,l,p,h,a[d+2],23,-995338651),l,p,a[d+0],6,-198630844),p=y(p,h,u,l,a[d+7],10,1126891415),l=y(l,p,h,u,a[d+14],15,-1416354905),u=y(u,l,p,h,a[d+5],21,-57434055),h=y(h,u,l,p,a[d+12],6,1700485571),p=y(p,h,u,l,a[d+3],10,-1894986606),l=y(l,p,h,u,a[d+10],15,-1051523),u=y(u,l,p,h,a[d+1],21,-2054922799),h=y(h,u,l,p,a[d+8],6,1873313359),p=y(p,h,u,l,a[d+15],10,-30611744),l=y(l,p,h,u,a[d+6],15,-1560198380),u=y(u,l,p,h,a[d+13],21,1309151649),h=y(h,u,l,p,a[d+4],6,-145523070),p=y(p,h,u,l,a[d+11],10,-1120210379),l=y(l,p,h,u,a[d+2],15,718787259),u=y(u,l,p,h,a[d+9],21,-343485551),h=h+b>>>0,u=u+v>>>0,l=l+w>>>0,p=p+k>>>0}return e.endian([h,u,l,p])};o._ff=function(t,e,n,s,r,o,i){var a=t+(e&n|~e&s)+(r>>>0)+i;return(a<<o|a>>>32-o)+e},o._gg=function(t,e,n,s,r,o,i){var a=t+(e&s|n&~s)+(r>>>0)+i;return(a<<o|a>>>32-o)+e},o._hh=function(t,e,n,s,r,o,i){var a=t+(e^n^s)+(r>>>0)+i;return(a<<o|a>>>32-o)+e},o._ii=function(t,e,n,s,r,o,i){var a=t+(n^(e|~s))+(r>>>0)+i;return(a<<o|a>>>32-o)+e},o._blocksize=16,o._digestsize=16,t.exports=function(t,n){if(null==t)throw new Error("Illegal argument "+t);var s=e.wordsToBytes(o(t,n));return n&&n.asBytes?s:n&&n.asString?r.bytesToString(s):e.bytesToHex(s)}}()})),kt=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ct=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],_t=function(t){var e=t,n=t.indexOf("["),s=t.indexOf("]");-1!=n&&-1!=s&&(t=t.substring(0,n)+t.substring(n,s).replace(/:/g,";")+t.substring(s,t.length));for(var r,o,i=kt.exec(t||""),a={},c=14;c--;)a[Ct[c]]=i[c]||"";return-1!=n&&-1!=s&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(t,e){var n=/\/{2,9}/g,s=e.replace(n,"/").split("/");"/"!=e.substr(0,1)&&0!==e.length||s.splice(0,1);"/"==e.substr(e.length-1,1)&&s.splice(s.length-1,1);return s}(0,a.path),a.queryKey=(r=a.query,o={},r.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,n){e&&(o[e]=n)})),o),a};var xt=1e3,Et=60*xt,$t=60*Et,Tt=24*$t,St=7*Tt,At=365.25*Tt,Bt=function(t,e){e=e||{};var n=typeof t;if("string"===n&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*At;case"weeks":case"week":case"w":return n*St;case"days":case"day":case"d":return n*Tt;case"hours":case"hour":case"hrs":case"hr":case"h":return n*$t;case"minutes":case"minute":case"mins":case"min":case"m":return n*Et;case"seconds":case"second":case"secs":case"sec":case"s":return n*xt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(t);if("number"===n&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=Tt)return Nt(t,e,Tt,"day");if(e>=$t)return Nt(t,e,$t,"hour");if(e>=Et)return Nt(t,e,Et,"minute");if(e>=xt)return Nt(t,e,xt,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=Tt)return Math.round(t/Tt)+"d";if(e>=$t)return Math.round(t/$t)+"h";if(e>=Et)return Math.round(t/Et)+"m";if(e>=xt)return Math.round(t/xt)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Nt(t,e,n,s){var r=e>=1.5*n;return Math.round(t/n)+" "+s+(r?"s":"")}var Ot=function(t){function e(t){let s,r=null;function o(...t){if(!o.enabled)return;const n=o,r=Number(new Date),i=r-(s||r);n.diff=i,n.prev=s,n.curr=r,s=r,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((s,r)=>{if("%%"===s)return"%";a++;const o=e.formatters[r];if("function"==typeof o){const e=t[a];s=o.call(n,e),t.splice(a,1),a--}return s})),e.formatArgs.call(n,t);(n.log||e.log).apply(n,t)}return o.namespace=t,o.useColors=e.useColors(),o.color=e.selectColor(t),o.extend=n,o.destroy=e.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null===r?e.enabled(t):r,set:t=>{r=t}}),"function"==typeof e.init&&e.init(o),o}function n(t,n){const s=e(this.namespace+(void 0===n?":":n)+t);return s.log=this.log,s}function s(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(s),...e.skips.map(s).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.names=[],e.skips=[];const s=("string"==typeof t?t:"").split(/[\s,]+/),r=s.length;for(n=0;n<r;n++)s[n]&&("-"===(t=s[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,s;for(n=0,s=e.skips.length;n<s;n++)if(e.skips[n].test(t))return!1;for(n=0,s=e.names.length;n<s;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=Bt,e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((n=>{e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e},Pt=ft((function(t,e){e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let s=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(s++,"%c"===t&&(r=s))})),e.splice(r,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=Ot(e);const{formatters:n}=t.exports;n.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}})),Rt=ft((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.url=void 0;const n=Pt("socket.io-client:url");e.url=function(t,e="",s){let r=t;s=s||"undefined"!=typeof location&&location,null==t&&(t=s.protocol+"//"+s.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?s.protocol+t:s.host+t),/^(https?|wss?):\/\//.test(t)||(n("protocol-less url %s",t),t=void 0!==s?s.protocol+"//"+t:"https://"+t),n("parse %s",t),r=_t(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(s&&s.port===r.port?"":":"+r.port),r}})),jt=ft((function(t){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}})),Ft="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),Lt=function(t){const e=t.xdomain,n=t.xscheme,s=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||jt))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!n&&s)return new XDomainRequest}catch(t){}if(!e)try{return new(Ft[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}};const Mt=Object.create(null);Mt.open="0",Mt.close="1",Mt.ping="2",Mt.pong="3",Mt.message="4",Mt.upgrade="5",Mt.noop="6";const It=Object.create(null);Object.keys(Mt).forEach((t=>{It[Mt[t]]=t}));var qt={PACKET_TYPES:Mt,PACKET_TYPES_REVERSE:It,ERROR_PACKET:{type:"error",data:"parser error"}};const{PACKET_TYPES:Dt}=qt,Vt="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Ht="function"==typeof ArrayBuffer,zt=(t,e)=>{const n=new FileReader;return n.onload=function(){const t=n.result.split(",")[1];e("b"+t)},n.readAsDataURL(t)};var Ut=({type:t,data:e},n,s)=>{return Vt&&e instanceof Blob?n?s(e):zt(e,s):Ht&&(e instanceof ArrayBuffer||(r=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer))?n?s(e instanceof ArrayBuffer?e:e.buffer):zt(new Blob([e]),s):s(Dt[t]+(e||""));var r},Kt=ft((function(t,e){var n;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e.encode=function(t){var e,s=new Uint8Array(t),r=s.length,o="";for(e=0;e<r;e+=3)o+=n[s[e]>>2],o+=n[(3&s[e])<<4|s[e+1]>>4],o+=n[(15&s[e+1])<<2|s[e+2]>>6],o+=n[63&s[e+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o},e.decode=function(t){var e,s,r,o,i,a=.75*t.length,c=t.length,h=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),l=new Uint8Array(u);for(e=0;e<c;e+=4)s=n.indexOf(t[e]),r=n.indexOf(t[e+1]),o=n.indexOf(t[e+2]),i=n.indexOf(t[e+3]),l[h++]=s<<2|r>>4,l[h++]=(15&r)<<4|o>>2,l[h++]=(3&o)<<6|63&i;return u}}));const{PACKET_TYPES_REVERSE:Yt,ERROR_PACKET:Xt}=qt;let Wt;"function"==typeof ArrayBuffer&&(Wt=Kt);const Jt=(t,e)=>{if(Wt){const n=Wt.decode(t);return Gt(n,e)}return{base64:!0,data:t}},Gt=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}};var Zt=(t,e)=>{if("string"!=typeof t)return{type:"message",data:Gt(t,e)};const n=t.charAt(0);if("b"===n)return{type:"message",data:Jt(t.substring(1),e)};return Yt[n]?t.length>1?{type:Yt[n],data:t.substring(1)}:{type:Yt[n]}:Xt};const Qt=String.fromCharCode(30);var te={protocol:4,encodePacket:Ut,encodePayload:(t,e)=>{const n=t.length,s=new Array(n);let r=0;t.forEach(((t,o)=>{Ut(t,!1,(t=>{s[o]=t,++r===n&&e(s.join(Qt))}))}))},decodePacket:Zt,decodePayload:(t,e)=>{const n=t.split(Qt),s=[];for(let t=0;t<n.length;t++){const r=Zt(n[t],e);if(s.push(r),"error"===r.type)break}return s}},ee=ft((function(t){function e(t){if(t)return function(t){for(var n in e.prototype)t[n]=e.prototype[n];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,s=this._callbacks["$"+t];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<s.length;r++)if((n=s[r])===e||n.fn===e){s.splice(r,1);break}return 0===s.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(n){s=0;for(var r=(n=n.slice(0)).length;s<r;++s)n[s].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}}));const ne=Pt("engine.io-client:transport");var se,re=class extends ee{constructor(t){super(),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e){const n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState?this.write(t):ne("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,this.emit("open")}onData(t){const e=te.decodePacket(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){this.emit("packet",t)}onClose(){this.readyState="closed",this.emit("close")}},oe=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},ie=function(t){for(var e={},n=t.split("&"),s=0,r=n.length;s<r;s++){var o=n[s].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e},ae="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ce={},he=0,ue=0;function le(t){var e="";do{e=ae[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function pe(){var t=le(+new Date);return t!==se?(he=0,se=t):t+"."+le(he++)}for(;ue<64;ue++)ce[ae[ue]]=ue;pe.encode=le,pe.decode=function(t){var e=0;for(ue=0;ue<t.length;ue++)e=64*e+ce[t.charAt(ue)];return e};var de=pe;const fe=Pt("engine.io-client:polling");var me=class extends re{get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{fe("paused"),this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(fe("we are currently polling - waiting to pause"),t++,this.once("pollComplete",(function(){fe("pre-pause polling complete"),--t||e()}))),this.writable||(fe("we are currently writing - waiting to pause"),t++,this.once("drain",(function(){fe("pre-pause writing complete"),--t||e()})))}else e()}poll(){fe("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(t){fe("polling got data %s",t);te.decodePayload(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose(),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():fe('ignoring poll - transport state "%s"',this.readyState))}doClose(){const t=()=>{fe("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(fe("transport open - closing"),t()):(fe("transport not open - deferring close"),this.once("open",t))}write(t){this.writable=!1,te.encodePayload(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emit("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let n="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=de()),this.supportsBinary||t.sid||(t.b64=1),t=oe(t),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),t.length&&(t="?"+t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+t}},ge={pick:(t,...e)=>e.reduce(((e,n)=>(t.hasOwnProperty(n)&&(e[n]=t[n]),e)),{})};const{pick:ye}=ge,be=Pt("engine.io-client:polling-xhr");function ve(){}const we=null!=new Lt({xdomain:!1}).responseType;class ke extends ee{constructor(t,e){super(),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=ye(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new Lt(t);try{be("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),this.hasXDR()?(e.onload=()=>{this.onLoad()},e.onerror=()=>{this.onError(e.responseText)}):e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():setTimeout((()=>{this.onError("number"==typeof e.status?e.status:0)}),0))},be("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout((()=>{this.onError(t)}),0)}"undefined"!=typeof document&&(this.index=ke.requestsCount++,ke.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(t){this.emit("data",t),this.onSuccess()}onError(t){this.emit("error",t),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=ve:this.xhr.onreadystatechange=ve,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete ke.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&this.onData(t)}hasXDR(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}abort(){this.cleanup()}}if(ke.requestsCount=0,ke.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",Ce);else if("function"==typeof addEventListener){addEventListener("onpagehide"in Ft?"pagehide":"unload",Ce,!1)}function Ce(){for(let t in ke.requests)ke.requests.hasOwnProperty(t)&&ke.requests[t].abort()}var _e=class extends me{constructor(t){if(super(t),"undefined"!=typeof location){const e="https:"===location.protocol;let n=location.port;n||(n=e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=we&&!e}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new ke(this.uri(),t)}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",(t=>{this.onError("xhr post error",t)}))}doPoll(){be("xhr poll");const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(t=>{this.onError("xhr poll error",t)})),this.pollXhr=t}},xe=ke;_e.Request=xe;const Ee=/\n/g,$e=/\\n/g;let Te;var Se=class extends me{constructor(t){super(t),this.query=this.query||{},Te||(Te=Ft.___eio=Ft.___eio||[]),this.index=Te.length,Te.push(this.onData.bind(this)),this.query.j=this.index}get supportsBinary(){return!1}doClose(){this.script&&(this.script.onerror=()=>{},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),super.doClose()}doPoll(){const t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=t=>{this.onError("jsonp poll error",t)};const e=document.getElementsByTagName("script")[0];e?e.parentNode.insertBefore(t,e):(document.head||document.body).appendChild(t),this.script=t;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){const t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)}),100)}doWrite(t,e){let n;if(!this.form){const t=document.createElement("form"),e=document.createElement("textarea"),n=this.iframeId="eio_iframe_"+this.index;t.className="socketio",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.target=n,t.method="POST",t.setAttribute("accept-charset","utf-8"),e.name="d",t.appendChild(e),document.body.appendChild(t),this.form=t,this.area=e}function s(){r(),e()}this.form.action=this.uri();const r=()=>{if(this.iframe)try{this.form.removeChild(this.iframe)}catch(t){this.onError("jsonp polling iframe removal error",t)}try{const t='<iframe src="javascript:0" name="'+this.iframeId+'">';n=document.createElement(t)}catch(t){n=document.createElement("iframe"),n.name=this.iframeId,n.src="javascript:0"}n.id=this.iframeId,this.form.appendChild(n),this.iframe=n};r(),t=t.replace($e,"\\\n"),this.area.value=t.replace(Ee,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=()=>{"complete"===this.iframe.readyState&&s()}:this.iframe.onload=s}},Ae={WebSocket:Ft.WebSocket||Ft.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer"};const{pick:Be}=ge,{WebSocket:Ne,usingBrowserWebSocket:Oe,defaultBinaryType:Pe}=Ae,Re=Pt("engine.io-client:websocket"),je="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class Fe extends re{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,n=je?{}:Be(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Oe&&!je?e?new Ne(t,e):new Ne(t):new Ne(t,e,n)}catch(t){return this.emit("error",t)}this.ws.binaryType=this.socket.binaryType||Pe,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const n=t[e],s=e===t.length-1;te.encodePacket(n,this.supportsBinary,(t=>{const e={};if(!Oe&&(n.options&&(e.compress=n.options.compress),this.opts.perMessageDeflate)){("string"==typeof t?Buffer.byteLength(t):t.length)<this.opts.perMessageDeflate.threshold&&(e.compress=!1)}try{Oe?this.ws.send(t):this.ws.send(t,e)}catch(t){Re("websocket closed before onclose event")}s&&setTimeout((()=>{this.writable=!0,this.emit("drain")}),0)}))}}onClose(){re.prototype.onClose.call(this)}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let n="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=de()),this.supportsBinary||(t.b64=1),t=oe(t),t.length&&(t="?"+t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+t}check(){return!(!Ne||"__initialize"in Ne&&this.name===Fe.prototype.name)}}var Le={polling:function(t){let e,n=!1,s=!1;const r=!1!==t.jsonp;if("undefined"!=typeof location){const e="https:"===location.protocol;let r=location.port;r||(r=e?443:80),n=t.hostname!==location.hostname||r!==t.port,s=t.secure!==e}if(t.xdomain=n,t.xscheme=s,e=new Lt(t),"open"in e&&!t.forceJSONP)return new _e(t);if(!r)throw new Error("JSONP disabled");return new Se(t)},websocket:Fe};const Me=Pt("engine.io-client:socket");class Ie extends ee{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=_t(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=_t(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=ie(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){Me('creating transport "%s"',t);const e=function(t){const e={};for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.opts.query);e.EIO=te.protocol,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return Me("options: %j",n),new Le[t](n)}open(){let t;if(this.opts.rememberUpgrade&&Ie.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void setTimeout((()=>{this.emit("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return Me("error while creating transport: %s",t),this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){Me("setting transport %s",t.name),this.transport&&(Me("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(()=>{this.onClose("transport close")}))}probe(t){Me('probing transport "%s"',t);let e=this.createTransport(t,{probe:1}),n=!1;Ie.priorWebsocketSuccess=!1;const s=()=>{n||(Me('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(s=>{if(!n)if("pong"===s.type&&"probe"===s.data){if(Me('probe transport "%s" pong',t),this.upgrading=!0,this.emit("upgrading",e),!e)return;Ie.priorWebsocketSuccess="websocket"===e.name,Me('pausing current transport "%s"',this.transport.name),this.transport.pause((()=>{n||"closed"!==this.readyState&&(Me("changing transport and sending upgrade packet"),h(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emit("upgrade",e),e=null,this.upgrading=!1,this.flush())}))}else{Me('probe transport "%s" failed',t);const n=new Error("probe error");n.transport=e.name,this.emit("upgradeError",n)}})))};function r(){n||(n=!0,h(),e.close(),e=null)}const o=n=>{const s=new Error("probe error: "+n);s.transport=e.name,r(),Me('probe transport "%s" failed because of error: %s',t,n),this.emit("upgradeError",s)};function i(){o("transport closed")}function a(){o("socket closed")}function c(t){e&&t.name!==e.name&&(Me('"%s" works - aborting "%s"',t.name,e.name),r())}const h=()=>{e.removeListener("open",s),e.removeListener("error",o),e.removeListener("close",i),this.removeListener("close",a),this.removeListener("upgrading",c)};e.once("open",s),e.once("error",o),e.once("close",i),this.once("close",a),this.once("upgrading",c),e.open()}onOpen(){if(Me("socket open"),this.readyState="open",Ie.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){Me("starting upgrade probes");let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(Me('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else Me('packet received with socket readyState "%s"',this.readyState)}onHandshake(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(Me("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}write(t,e,n){return this.sendPacket("message",t,e,n),this}send(t,e,n){return this.sendPacket("message",t,e,n),this}sendPacket(t,e,n,s){if("function"==typeof e&&(s=e,e=void 0),"function"==typeof n&&(s=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const r={type:t,data:e,options:n};this.emit("packetCreate",r),this.writeBuffer.push(r),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this.onClose("forced close"),Me("socket closing - telling transport to close"),this.transport.close()},e=()=>{this.removeListener("upgrade",e),this.removeListener("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():t()})):this.upgrading?n():t()),this}onError(t){Me("socket error %j",t),Ie.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(Me('socket close with reason: "%s"',t),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let n=0;const s=t.length;for(;n<s;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}Ie.priorWebsocketSuccess=!1,Ie.protocol=te.protocol;var qe=Ie,De=(t,e)=>new qe(t,e),Ve=qe,He=qe.protocol,ze=re,Ue=Le,Ke=te;De.Socket=Ve,De.protocol=He,De.Transport=ze,De.transports=Ue,De.parser=Ke;var Ye=ft((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasBinary=e.isBinary=void 0;const n="function"==typeof ArrayBuffer,s=Object.prototype.toString,r="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===s.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===s.call(File);function i(t){return n&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||r&&t instanceof Blob||o&&t instanceof File}e.isBinary=i,e.hasBinary=function t(e,n){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let n=0,s=e.length;n<s;n++)if(t(e[n]))return!0;return!1}if(i(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return!0;return!1}})),Xe=ft((function(t,e){function n(t,e){if(!t)return t;if(Ye.isBinary(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){const s=new Array(t.length);for(let r=0;r<t.length;r++)s[r]=n(t[r],e);return s}if("object"==typeof t&&!(t instanceof Date)){const s={};for(const r in t)t.hasOwnProperty(r)&&(s[r]=n(t[r],e));return s}return t}function s(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=s(t[n],e);else if("object"==typeof t)for(const n in t)t.hasOwnProperty(n)&&(t[n]=s(t[n],e));return t}Object.defineProperty(e,"__esModule",{value:!0}),e.reconstructPacket=e.deconstructPacket=void 0,e.deconstructPacket=function(t){const e=[],s=t.data,r=t;return r.data=n(s,e),r.attachments=e.length,{packet:r,buffers:e}},e.reconstructPacket=function(t,e){return t.data=s(t.data,e),t.attachments=void 0,t}})),We=ft((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Decoder=e.Encoder=e.PacketType=e.protocol=void 0;const n=Pt("socket.io-parser");var s;e.protocol=5,function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(s=e.PacketType||(e.PacketType={}));e.Encoder=class{encode(t){return n("encoding packet %j",t),t.type!==s.EVENT&&t.type!==s.ACK||!Ye.hasBinary(t)?[this.encodeAsString(t)]:(t.type=t.type===s.EVENT?s.BINARY_EVENT:s.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==s.BINARY_EVENT&&t.type!==s.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),n("encoded %j as %s",t,e),e}encodeAsBinary(t){const e=Xe.deconstructPacket(t),n=this.encodeAsString(e.packet),s=e.buffers;return s.unshift(n),s}};class r extends ee{constructor(){super()}add(t){let e;if("string"==typeof t)e=this.decodeString(t),e.type===s.BINARY_EVENT||e.type===s.BINARY_ACK?(this.reconstructor=new o(e),0===e.attachments&&super.emit("decoded",e)):super.emit("decoded",e);else{if(!Ye.isBinary(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emit("decoded",e))}}decodeString(t){let e=0;const o={type:Number(t.charAt(0))};if(void 0===s[o.type])throw new Error("unknown packet type "+o.type);if(o.type===s.BINARY_EVENT||o.type===s.BINARY_ACK){const n=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const s=t.substring(n,e);if(s!=Number(s)||"-"!==t.charAt(e))throw new Error("Illegal attachments");o.attachments=Number(s)}if("/"===t.charAt(e+1)){const n=e+1;for(;++e;){if(","===t.charAt(e))break;if(e===t.length)break}o.nsp=t.substring(n,e)}else o.nsp="/";const i=t.charAt(e+1);if(""!==i&&Number(i)==i){const n=e+1;for(;++e;){const n=t.charAt(e);if(null==n||Number(n)!=n){--e;break}if(e===t.length)break}o.id=Number(t.substring(n,e+1))}if(t.charAt(++e)){const n=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(e));if(!r.isPayloadValid(o.type,n))throw new Error("invalid payload");o.data=n}return n("decoded %s as %j",t,o),o}static isPayloadValid(t,e){switch(t){case s.CONNECT:return"object"==typeof e;case s.DISCONNECT:return void 0===e;case s.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case s.EVENT:case s.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case s.ACK:case s.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}e.Decoder=r;class o{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=Xe.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}})),Je=ft((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.on=void 0,e.on=function(t,e,n){return t.on(e,n),function(){t.off(e,n)}}})),Ge=ft((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.StrictEventEmitter=void 0;e.StrictEventEmitter=class extends ee{on(t,e){return super.on(t,e),this}once(t,e){return super.once(t,e),this}emit(t,...e){return super.emit(t,...e),this}emitReserved(t,...e){return super.emit(t,...e),this}listeners(t){return super.listeners(t)}}})),Ze=ft((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;const n=Pt("socket.io-client:socket"),s=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class r extends Ge.StrictEventEmitter{constructor(t,e,n){super(),this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Je.on(t,"open",this.onopen.bind(this)),Je.on(t,"packet",this.onpacket.bind(this)),Je.on(t,"error",this.onerror.bind(this)),Je.on(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(s.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const r={type:We.PacketType.EVENT,data:e,options:{}};r.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(n("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),r.id=this.ids++);const o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!o||!this.connected)?n("discard packet as the transport is not currently writable"):this.connected?this.packet(r):this.sendBuffer.push(r),this.flags={},this}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){n("transport is open - connecting"),"function"==typeof this.auth?this.auth((t=>{this.packet({type:We.PacketType.CONNECT,data:t})})):this.packet({type:We.PacketType.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t){n("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case We.PacketType.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case We.PacketType.EVENT:case We.PacketType.BINARY_EVENT:this.onevent(t);break;case We.PacketType.ACK:case We.PacketType.BINARY_ACK:this.onack(t);break;case We.PacketType.DISCONNECT:this.ondisconnect();break;case We.PacketType.CONNECT_ERROR:const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];n("emitting event %j",e),null!=t.id&&(n("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let s=!1;return function(...r){s||(s=!0,n("sending ack %j",r),e.packet({type:We.PacketType.ACK,id:t,data:r}))}}onack(t){const e=this.acks[t.id];"function"==typeof e?(n("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):n("bad ack %s",t.id)}onconnect(t){n("socket connected with id %s",t),this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>this.packet(t))),this.sendBuffer=[]}ondisconnect(){n("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(n("performing disconnect (%s)",this.nsp),this.packet({type:We.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}e.Socket=r})),Qe=tn;function tn(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}tn.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},tn.prototype.reset=function(){this.attempts=0},tn.prototype.setMin=function(t){this.ms=t},tn.prototype.setMax=function(t){this.max=t},tn.prototype.setJitter=function(t){this.jitter=t};var en=ft((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Manager=void 0;const n=Pt("socket.io-client:manager");class s extends Ge.StrictEventEmitter{constructor(t,e){super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new Qe({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const n=e.parser||We;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(n("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;n("opening %s",this.uri),this.engine=De(this.uri,this.opts);const e=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const r=Je.on(e,"open",(function(){s.onopen(),t&&t()})),o=Je.on(e,"error",(e=>{n("error"),s.cleanup(),s._readyState="closed",this.emitReserved("error",e),t?t(e):s.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;n("connect attempt will timeout after %d",t),0===t&&r();const s=setTimeout((()=>{n("connect attempt timed out after %d",t),r(),e.close(),e.emit("error",new Error("timeout"))}),t);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(r),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){n("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Je.on(t,"ping",this.onping.bind(this)),Je.on(t,"data",this.ondata.bind(this)),Je.on(t,"error",this.onerror.bind(this)),Je.on(t,"close",this.onclose.bind(this)),Je.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){n("error",t),this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n||(n=new Ze.Socket(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const t of e){if(this.nsps[t].active)return void n("socket %s is still active, skipping close",t)}this._close()}_packet(t){n("writing packet %j",t);const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){n("cleanup"),this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){n("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t){n("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)n("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();n("will wait %dms before reconnect attempt",e),this._reconnecting=!0;const s=setTimeout((()=>{t.skipReconnect||(n("attempting reconnect"),this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(n("reconnect attempt error"),t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):(n("reconnect success"),t.onreconnect())})))}),e);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}e.Manager=s})),nn=dt(ft((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.io=e.Socket=e.Manager=e.protocol=void 0;const n=Pt("socket.io-client");t.exports=e=r;const s=e.managers={};function r(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};const r=Rt.url(t,e.path||"/socket.io"),o=r.source,i=r.id,a=r.path,c=s[i]&&a in s[i].nsps;let h;return e.forceNew||e["force new connection"]||!1===e.multiplex||c?(n("ignoring socket cache for %s",o),h=new en.Manager(o,e)):(s[i]||(n("new io instance for %s",o),s[i]=new en.Manager(o,e)),h=s[i]),r.query&&!e.query&&(e.query=r.queryKey),h.socket(r.path,e)}e.io=r,Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return We.protocol}}),e.connect=r;var o=en;Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return o.Manager}}),Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return Ze.Socket}}),e.default=r})));function sn(e){let n;return{c(){n=d("div")},m(t,e){l(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function rn(t){const e=T();let n=null;const s=nn("ws://localhost:3000/",{withCredentials:!0,extraHeaders:{"X-Perkd-Hooks":"enabled"}});return s.on("connect",(()=>{console.log(`connect ${s.id}`)})),s.on("perkd:hooks",(t=>{const{data:s}=t;if(console.log("hooks received ",t),n!==s.nonce){if(n=s.nonce,"update/tier"===s.topic&&(console.log("[SOCKET CLIENT] update/tier-- ",s),e("perkd::hooks-sync",{data:s})),window.__perkd__init__&&(e("perkd::init",{data:window.__perkd__init__}),window.__perkd__init__.isLoggedIn&&window.__perkd__init__.shop&&(console.log("shop id ",wt(window.__perkd__init__.shop)),s.discountCode&&"create/discount"===s.topic))){const t=`https://${window.__perkd__init__.shop}/discount/${s.discountCode}`;console.log(`should post dicount code at ${t} `),fetch(t,{method:"GET"})}}else console.log("[IGNORING] duplicate socket event received. ")})),s.on("disconnect",(()=>{console.log("disconnect")})),setInterval((()=>{const t=Date.now();s.emit("ping",(()=>{console.log(`[CLIENT] pong (latency: ${Date.now()-t} ms)`)}))}),15e3),[]}nn.Manager,nn.Socket;class on extends W{constructor(t){super(),X(this,t,rn,sn,i,{})}}function an(e){let n;return{c(){n=d("style"),n.textContent='@import url("https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;500;700&display=swap");\n\n* {\n  font-family: Nunito Sans, Sans;\n  /* subpixel anti-aliased */\n  -webkit-font-smoothing: auto;\n  -moz-osx-font-smoothing: auto;\n  /* -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale; */\n}'},m(t,e){u(document.head,n)},p:t,i:t,o:t,d(t){p(n)}}}class cn extends W{constructor(t){super(),X(this,t,null,an,i,{})}}function hn(n){let s,r,o=[{width:"25"},{height:"23"},{viewBox:"0 0 25 23"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},n[0]],i={};for(let t=0;t<o.length;t+=1)i=e(i,o[t]);return{c(){s=f("svg"),r=f("path"),this.h()},l(t){s=k(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0},1);var e=w(s);r=k(e,"path",{d:!0,fill:!0},1),w(r).forEach(p),e.forEach(p),this.h()},h(){b(r,"d","M23.9583 2.77778H19.4444V1.04167C19.4444 0.46441 18.98 0 18.4028 0H6.59722C6.01996 0 5.55556 0.46441 5.55556 1.04167V2.77778H1.04167C0.46441 2.77778 0 3.24219 0 3.81944V6.25C0 7.79948 0.976562 9.39236 2.68663 10.6207C4.05382 11.6059 5.71615 12.2309 7.46094 12.4306C8.82378 14.6918 10.4167 15.625 10.4167 15.625V18.75H8.33333C6.80122 18.75 5.55556 19.6484 5.55556 21.1806V21.7014C5.55556 21.9878 5.78993 22.2222 6.07639 22.2222H18.9236C19.2101 22.2222 19.4444 21.9878 19.4444 21.7014V21.1806C19.4444 19.6484 18.1988 18.75 16.6667 18.75H14.5833V15.625C14.5833 15.625 16.1762 14.6918 17.5391 12.4306C19.2882 12.2309 20.9505 11.6059 22.3134 10.6207C24.0191 9.39236 25 7.79948 25 6.25V3.81944C25 3.24219 24.5356 2.77778 23.9583 2.77778ZM4.3099 8.36806C3.25087 7.60417 2.77778 6.75347 2.77778 6.25V5.55556H5.56424C5.60764 6.97049 5.81597 8.2118 6.11979 9.29687C5.46441 9.07118 4.85243 8.75868 4.3099 8.36806ZM22.2222 6.25C22.2222 6.94878 21.454 7.81684 20.6901 8.36806C20.1476 8.75868 19.5312 9.07118 18.8759 9.29687C19.1797 8.2118 19.388 6.97049 19.4314 5.55556H22.2222V6.25Z"),b(r,"fill","#E48731"),v(s,i)},m(t,e){l(t,s,e),u(s,r)},p(t,[e]){v(s,i=H(o,[{width:"25"},{height:"23"},{viewBox:"0 0 25 23"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},1&e&&t[0]]))},i:t,o:t,d(t){t&&p(s)}}}function un(t,n,s){return t.$$set=t=>{s(0,n=e(e({},n),h(t)))},[n=h(n)]}class ln extends W{constructor(t){super(),X(this,t,un,hn,i,{})}}function pn(t){let e,n,s,r,o,i,a,c,h,v,w,k,C,_,x,E,$,T;return o=new ln({props:{width:"24",class:"opacity-40"}}),{c(){e=d("div"),n=d("div"),s=d("div"),r=d("div"),z(o.$$.fragment),i=g(),a=d("div"),c=f("svg"),h=f("circle"),k=g(),C=d("a"),_=m("x"),b(r,"class","font-medium text-xs flex flex-row items-center justify-center"),b(h,"class","text-orange-dark progress-ring__circle svelte-b4grqx"),b(h,"stroke-width","4"),b(h,"stroke-dasharray",t[3]+" "+t[3]),b(h,"stroke-dashoffset",v=t[3]-t[0]/100*t[3]),b(h,"stroke-linecap","round"),b(h,"stroke","currentColor"),b(h,"fill","transparent"),b(h,"r","34"),b(h,"cx","40"),b(h,"cy","40"),b(c,"class","w-20 h-20"),b(a,"x-data","scrollProgress"),b(a,"class","fixed inline-flex items-center justify-center overflow-hidden rounded-full z-0"),b(s,"class","widget-toggler__default\n      flex flex-row\n      cursor-pointer\n      items-center  justify-center  border\n      shadow-lg svelte-b4grqx"),b(s,"style",w=t[1]+"color:white;"),b(C,"href","#"),b(C,"style",x=t[2]+"color: white;"),b(C,"class","widget-toggler__close flex  items-center bg-orange-dark justify-center shadow-lg border svelte-b4grqx"),b(n,"id","widget-toggler__btn"),b(n,"aria-label","Perkd Rewards Program"),b(n,"class","flex justify-end\n          tracking-normal\n          outline-none focus:outline-none p-4 items-center svelte-b4grqx"),b(e,"class","widget-toggler svelte-b4grqx")},m(p,d){l(p,e,d),u(e,n),u(n,s),u(s,r),U(o,r,null),u(s,i),u(s,a),u(a,c),u(c,h),u(n,k),u(n,C),u(C,_),E=!0,$||(T=y(n,"click",t[6]),$=!0)},p(t,[e]){(!E||1&e&&v!==(v=t[3]-t[0]/100*t[3]))&&b(h,"stroke-dashoffset",v),(!E||2&e&&w!==(w=t[1]+"color:white;"))&&b(s,"style",w),(!E||4&e&&x!==(x=t[2]+"color: white;"))&&b(C,"style",x)},i(t){E||(D(o.$$.fragment,t),E=!0)},o(t){V(o.$$.fragment,t),E=!1},d(t){t&&p(e),K(o),$=!1,T()}}}function dn(t,e,n){let s,r,{isToggled:o=!1}=e,{progress:i=0}=e;const a=68*Math.PI,c=T();return t.$$set=t=>{"isToggled"in t&&n(5,o=t.isToggled),"progress"in t&&n(0,i=t.progress)},t.$$.update=()=>{32&t.$$.dirty&&n(1,s=o?"transform: translateX(60px); transition: opacity 0.1s; opacity:0; z-index: -1; pointer-events: none;":"transform: translateX(0px); transition: opacity 0.2s; opacity:1; z-index: 5;  transition: all .2s ease-in-out!important; "),32&t.$$.dirty&&n(2,r=o?"transform: translateX(0px); transition: opacity 0.1s; opacity:1; z-index:5;":"transform: translateX(-5px); transition: opacity 0.1s; opacity:0;  transition: all .2s ease-in-out!important; z-index:-1;")},[i,s,r,a,c,o,()=>{c("toggle")}]}class fn extends W{constructor(t){super(),X(this,t,dn,pn,i,{isToggled:5,progress:0})}}const mn="perkd-membership:open",gn="perkd-membership:close",yn="perkd-membership:toggle";function bn(e){let n,s;return n=new pt({props:{amountToNextTier:_n,nextTier:xn}}),{c(){z(n.$$.fragment)},m(t,e){U(n,t,e),s=!0},p:t,i(t){s||(D(n.$$.fragment,t),s=!0)},o(t){V(n.$$.fragment,t),s=!1},d(t){K(n,t)}}}function vn(e){let n,s;return n=new ht({}),{c(){z(n.$$.fragment)},m(t,e){U(n,t,e),s=!0},p:t,i(t){s||(D(n.$$.fragment,t),s=!0)},o(t){V(n.$$.fragment,t),s=!1},d(t){K(n,t)}}}function wn(t){let e,n,s,o;const i=[vn,bn],a=[];function c(t,e){return t[0]?1:0}return e=c(t),n=a[e]=i[e](t),{c(){n.c(),s=m("")},m(t,n){a[e].m(t,n),l(t,s,n),o=!0},p(t,o){let h=e;e=c(t),e===h?a[e].p(t,o):(q={r:0,c:[],p:q},V(a[h],1,1,(()=>{a[h]=null})),q.r||r(q.c),q=q.p,n=a[e],n?n.p(t,o):(n=a[e]=i[e](t),n.c()),D(n,1),n.m(s.parentNode,s))},i(t){o||(D(n),o=!0)},o(t){V(n),o=!1},d(t){a[e].d(t),t&&p(s)}}}function kn(t){let e,n,s,r,o,i,a,c,h,f,m,y,v,w,k,C,x,E,$,T;return e=new cn({}),y=new Z({props:{show:t[1]}}),w=new at({props:{type:t[2],$$slots:{default:[wn]},$$scope:{ctx:t}}}),w.$on("dismiss",t[6]),x=new fn({props:{isToggled:Cn,progress:t[4]}}),x.$on("toggle",En),$=new on({}),$.$on("perkd::hooks-sync",t[7]),{c(){z(e.$$.fragment),n=g(),s=d("div"),r=d("div"),o=d("iframe"),c=g(),h=d("div"),f=d("div"),m=d("div"),z(y.$$.fragment),v=g(),z(w.$$.fragment),C=g(),z(x.$$.fragment),E=g(),z($.$$.fragment),b(o,"title","Perkd Membership Program"),b(o,"id","perkd-membership-widget-frame"),o.src!==(i="https://localhost:8085/")&&b(o,"src","https://localhost:8085/"),b(o,"frameborder","0"),b(o,"scrolling","no"),b(o,"style",a=t[5]+t[3]),b(o,"sandbox","allow-same-origin allow-scripts allow-forms allow-popups"),b(o,"class","svelte-1jktka4"),b(r,"class","perkd-membership-launcher-popup svelte-1jktka4"),b(m,"class",k="widget__notification "+(t[1]?"visible":"hidden")),b(f,"class","flex flex-col items-end -mt-4"),_(f,"width","400px"),b(h,"id","perkd-membership-widget-launcher"),b(s,"aria-live","polite"),_(s,"overflow","hidden"),_(s,"position","fixed"),_(s,"bottom","0"),_(s,"right","0")},m(t,i){U(e,t,i),l(t,n,i),l(t,s,i),u(s,r),u(r,o),u(s,c),u(s,h),u(h,f),u(f,m),U(y,m,null),u(m,v),U(w,m,null),u(f,C),U(x,f,null),u(f,E),U($,f,null),T=!0},p(t,[e]){(!T||40&e&&a!==(a=t[5]+t[3]))&&b(o,"style",a);const n={};2&e&&(n.show=t[1]),y.$set(n);const s={};4&e&&(s.type=t[2]),4097&e&&(s.$$scope={dirty:e,ctx:t}),w.$set(s),(!T||2&e&&k!==(k="widget__notification "+(t[1]?"visible":"hidden")))&&b(m,"class",k);const r={};16&e&&(r.progress=t[4]),x.$set(r)},i(t){T||(D(e.$$.fragment,t),D(y.$$.fragment,t),D(w.$$.fragment,t),D(x.$$.fragment,t),D($.$$.fragment,t),T=!0)},o(t){V(e.$$.fragment,t),V(y.$$.fragment,t),V(w.$$.fragment,t),V(x.$$.fragment,t),V($.$$.fragment,t),T=!1},d(t){K(e,t),t&&p(n),t&&p(s),K(y),K(w),K(x),K($)}}}let Cn=!1,_n=2e3,xn="Gold Memberhip";function En(){}function $n(t,e,n){let s;var r=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,o){function i(t){try{c(s.next(t))}catch(t){o(t)}}function a(t){try{c(s.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,a)}c((s=s.apply(t,e||[])).next())}))};let o=!1,i=!0,a=null,c="min-height: 370px",h=10;const u="min-height: 320px";var l;l=()=>r(void 0,void 0,void 0,(function*(){if(console.log("[ON MOUNT] Rewards Widget Toggler "),window.__perkd__init__&&window.__perkd__init__.isLoggedIn)return n(0,o=window.__perkd__init__.isLoggedIn||!1),void console.info("[WIDGET] User is logged in ",window.__perkd__init__.isLoggedIn);document.getElementById("perkd-membership-widget-frame")})),$().$$.on_mount.push(l),function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)}(window,"message",(function(t){if(!t.data.type)return;const{type:e}=t.data;switch(e){case mn:console.log("[EVENT RECEIVED] perkd-membership:open");break;case gn:console.log("[EVENT RECEIVED] perkd-membership:close");break;case yn:console.log("[EVENT RECEIVED] perkd-membership:toggle");break;default:return null}}));return t.$$.update=()=>{1&t.$$.dirty&&(o?(n(3,c=u),n(1,i=!0),n(2,a="progress")):(n(3,c=u),n(1,i=!0),n(2,a="join")))},n(5,s="transform: translateY(4px); opacity: 0;  min-height: 10px; pointer-events: none;"),[o,i,a,c,h,"transform: translateY(4px); opacity: 0;  min-height: 10px; pointer-events: none;",()=>n(1,i=!1),t=>{n(4,h=100===h?10:h+25),n(1,i=!0)}]}const Tn=document.getElementById("perkd-membership-widget-launcher-frame"),Sn=Tn?Tn.contentWindow.document.getElementById("perkd-membership-widget-launcher"):document.getElementById("perkd-membership-app");return new class extends W{constructor(t){super(),X(this,t,$n,kn,i,{})}}({target:Sn})}();
//# sourceMappingURL=perkd-membership-widget.min.js.map
